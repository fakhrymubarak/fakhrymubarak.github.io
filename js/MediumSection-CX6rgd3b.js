const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["js/MediumFilter-B9W_uWx_.js","js/index-B9ll_S0j.js","js/chunk-DavUf6mE.js","js/chunk-BNRFPHjS.js","js/chunk-Cj4qlto9.js","assets/index-R5fZYeX2.css","js/chunk-BKXjDxtQ.js"])))=>i.map(i=>d[i]);
var N=Object.defineProperty;var C=(n,e,r)=>e in n?N(n,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):n[e]=r;var b=(n,e,r)=>C(n,typeof e!="symbol"?e+"":e,r);import{j as t,b as F,_ as M}from"./index-B9ll_S0j.js";import{r as x}from"./chunk-BNRFPHjS.js";import{a as T,L as D,d as E,m as f,A as P}from"./chunk-BKXjDxtQ.js";import{C as R,c as U,E as S,F as _}from"./chunk-Cj4qlto9.js";import"./chunk-DavUf6mE.js";const H="https://api.allorigins.win/raw?url=";class w{static async fetchArticles(e,r={}){const{retry:s=0}=r,i=Date.now();if(this.cache&&i-this.lastFetch<this.CACHE_DURATION)return this.cache;try{const d=`https://medium.com/feed/@${e}`,h=`${H}${encodeURIComponent(d)}`;console.log("ðŸ”„ Fetching RSS feed from:",h);const o=await fetch(h);if(!o.ok)throw new Error(`HTTP error! status: ${o.status}`);const g=await o.text(),m=this.parseRSSFeed(g).items.map((a,c)=>{const p=a.content||a.contentSnippet||"",y=this.extractPlainText(p),j=this.extractPlainText(a.contentSnippet||""),v=y||j,k=(this.createSummary(v)||v||"Summary unavailable").trim();return{id:a.guid||a.link||`article-${c}`,title:a.title||"Untitled",description:k,url:a.link||"",publishedDate:a.pubDate||new Date().toISOString(),readTime:this.estimateReadTime(y),tags:a.categories||[],featured:c<3,imageUrl:this.extractImageUrl(a),contentSnippet:this.createHtmlSnippet(p)}}),l={articles:m,profileUrl:`https://medium.com/@${e}`,totalArticles:m.length,lastUpdated:new Date().toISOString()};return this.cache=l,this.lastFetch=i,l}catch(d){return console.error("Error fetching Medium articles:",d),s<1?(console.warn("Retrying Medium fetchâ€¦"),this.fetchArticles(e,{retry:s+1})):this.cache?this.cache:{articles:[{id:"sample-1",title:"Android File Upload with Retrofit + Coroutines + Progress (Flow)",description:`If you've ever searched "How to implement progress bar when upload file to backend services?", you'll find lots of partial answers...`,url:"https://fakhrymubarak.medium.com/android-file-upload-with-retrofit-coroutines-progress-flow-51ea26e70d46",publishedDate:new Date().toISOString(),readTime:"5 min read",tags:["android","kotlin","retrofit"],featured:!0,contentSnippet:"Learn how to implement file upload with progress tracking using Retrofit, Coroutines, and Flow in Android development."}],profileUrl:`https://medium.com/@${e}`,totalArticles:1,lastUpdated:new Date().toISOString()}}}static clearCache(){this.cache=null,this.lastFetch=0}static estimateReadTime(e){const s=e.trim(),i=s?s.split(/\s+/).length:0;return`${Math.max(1,Math.ceil(i/200))} min read`}static extractPlainText(e){if(!e)return"";const r=this.decodeHtmlEntities(e);try{const i=this.createDomDocument(r,"text/html");if(i){i.querySelectorAll("script, style, iframe, noscript, svg").forEach(o=>o.remove()),i.querySelectorAll("img").forEach(o=>{if(o.alt){const g=i.createTextNode(` ${o.alt} `);o.replaceWith(g)}else o.remove()});const d=i.body?.textContent||"",h=this.normalizeWhitespace(d);if(h)return h}}catch(i){console.error("Error extracting plain text from HTML:",i)}const s=r.replace(/<script[\s\S]*?<\/script>/gi," ").replace(/<style[\s\S]*?<\/style>/gi," ").replace(/<iframe[\s\S]*?<\/iframe>/gi," ").replace(/<noscript[\s\S]*?<\/noscript>/gi," ").replace(/<svg[\s\S]*?<\/svg>/gi," ").replace(/<figure[\s\S]*?<\/figure>/gi," ").replace(/<img[^>]*>/gi," ").replace(/<[^>]+>/g," ");return this.normalizeWhitespace(s)}static createSummary(e,r=60){if(!e)return"";const s=e.trim().split(/\s+/);return s.length<=r?e:`${s.slice(0,r).join(" ").trim()}...`}static createHtmlSnippet(e,r={}){if(!e)return"";const{maxParagraphs:s=3,maxLength:i=900}=r,d=this.decodeHtmlEntities(e);try{const o=this.createDomDocument(d,"text/html");if(o){const g=Array.from(o.body?.querySelectorAll("p, ul, ol, h2, h3, h4, blockquote, pre")??[]),u=[];let m=0;for(const a of g){if(u.length>=s||m>=i)break;const c=a.outerHTML?.trim();c&&(u.push(c),m+=c.length)}if(u.length>0){const a=u.join("");return m>=i?`${a}...`:a}const l=o.body?.textContent||"";return this.createSummary(l,Math.floor(i/5))}}catch(o){console.error("Error creating HTML snippet:",o)}const h=d.slice(0,i);return d.length>i?`${h}...`:h}static decodeHtmlEntities(e){if(!e)return"";if(typeof window<"u"&&typeof window.document<"u"){const r=window.document.createElement("textarea");return r.innerHTML=e,r.value}return e.replace(/&amp;/g,"&").replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&quot;/g,'"').replace(/&#39;/g,"'").replace(/&apos;/g,"'").replace(/&nbsp;/g," ").replace(/&#(\d+);/g,(r,s)=>String.fromCharCode(Number(s))).replace(/&#x([0-9a-f]+);/gi,(r,s)=>String.fromCharCode(parseInt(s,16)))}static normalizeWhitespace(e){return e.replace(/\s+/g," ").trim()}static parseRSSFeed(e){try{const r=this.createDomDocument(e,"text/xml");return r?{items:Array.from(r.querySelectorAll("item")).map(i=>{const d=i.querySelector("title")?.textContent?.trim()??"",h=i.querySelector("link")?.textContent?.trim()??"",o=i.querySelector("pubDate")?.textContent?.trim()??"",g=i.querySelector("description")?.textContent?.trim()??"";let u="";const m=i.getElementsByTagName("content:encoded")[0]??i.getElementsByTagNameNS("http://purl.org/rss/1.0/modules/content/","encoded")[0];m?.textContent&&(u=m.textContent);const l=Array.from(i.querySelectorAll("category")).map(c=>c.textContent?.trim()??""),a=i.querySelector("guid")?.textContent?.trim()??h;return{title:d,link:h,pubDate:o,contentSnippet:g,content:u,categories:l,guid:a}})}:(console.warn("DOMParser unavailable when parsing Medium RSS feed."),{items:[]})}catch(r){return console.error("Error parsing RSS feed:",r),{items:[]}}}static extractImageUrl(e){if(e.content){const r=e.content.match(/<img[^>]+src="([^"]+)"/);if(r)return r[1]}if(e.contentSnippet){const r=e.contentSnippet.match(/<img[^>]+src="([^"]+)"/);if(r)return r[1]}}static createDomDocument(e,r){const s=typeof window<"u"&&window.DOMParser||(typeof globalThis.DOMParser<"u"?globalThis.DOMParser:void 0);if(!s)return null;try{return new s().parseFromString(e,r)}catch(i){return console.error("Failed to parse DOM content:",i),null}}}b(w,"cache",null),b(w,"lastFetch",0),b(w,"CACHE_DURATION",1800*1e3);const A=6,I=(n="fakhrymubarak")=>{const[e,r]=x.useState({articles:[],selectedArticle:null,activeFilter:"all",showFilters:!1,showAllArticles:!1,availableFilters:[],filteredArticles:[],displayedArticles:[],hasMoreArticles:!1,loading:!0,error:null});x.useEffect(()=>{(async()=>{try{r(p=>({...p,loading:!0,error:null})),console.log("ðŸ”„ Fetching Medium articles for:",n);const a=await w.fetchArticles(n);console.log("âœ… Medium articles fetched:",a.articles.length);const c=Array.from(new Set(a.articles.flatMap(p=>p.tags)));r(p=>({...p,articles:a.articles,availableFilters:c,loading:!1}))}catch(a){console.error("âŒ Error in useMedium hook:",a),r(c=>({...c,loading:!1,error:a instanceof Error?a.message:"Failed to fetch articles"}))}})().then()},[n]);const s=x.useMemo(()=>e.activeFilter==="all"?e.articles:e.articles.filter(l=>l.tags.includes(e.activeFilter)),[e.articles,e.activeFilter]),i=x.useMemo(()=>e.showAllArticles?s:s.slice(0,A),[s,e.showAllArticles]),d=s.length>A;return{...e,filteredArticles:s,displayedArticles:i,hasMoreArticles:d,handleArticleSelect:l=>{const a=e.articles.find(c=>c.id===l)||null;r(c=>({...c,selectedArticle:a}))},handleFilterChange:l=>{r(a=>({...a,activeFilter:l,showAllArticles:!1}))},handleCloseModal:()=>{r(l=>({...l,selectedArticle:null}))},handleToggleArticles:()=>{r(l=>({...l,showAllArticles:!l.showAllArticles}))},handleToggleFilters:()=>{r(l=>({...l,showFilters:!l.showFilters}))}}},O=({article:n,index:e})=>{const r=s=>new Date(s).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"});return t.jsxs(T.article,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:e*.1},className:"group bg-light-surface dark:bg-dark-surface rounded-xl border border-light-muted/20 dark:border-dark-muted/20 hover:border-light-primary/30 dark:hover:border-dark-primary/30 transition-all duration-300 overflow-hidden flex flex-col",children:[n.imageUrl&&t.jsx("div",{className:"aspect-video overflow-hidden",children:t.jsx("img",{src:n.imageUrl,alt:n.title,className:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-300"})}),t.jsxs("div",{className:"p-6 flex flex-col gap-4",children:[t.jsxs("div",{className:"space-y-2",children:[t.jsx("h3",{className:"font-semibold text-light-text dark:text-dark-text group-hover:text-light-primary dark:group-hover:text-dark-primary transition-colors line-clamp-2",children:n.title}),t.jsx("p",{className:"text-sm text-light-muted dark:text-dark-muted line-clamp-3",children:n.description||"Summary unavailable"})]}),t.jsx("div",{className:"flex items-center justify-between text-sm text-light-muted dark:text-dark-muted",children:t.jsxs("div",{className:"flex items-center space-x-4",children:[t.jsxs("div",{className:"flex items-center space-x-1",children:[t.jsx(R,{className:"w-4 h-4"}),t.jsx("span",{children:r(n.publishedDate)})]}),t.jsxs("div",{className:"flex items-center space-x-1",children:[t.jsx(U,{className:"w-4 h-4"}),t.jsx("span",{children:n.readTime})]})]})}),n.tags.length>0&&t.jsxs("div",{className:"flex flex-wrap gap-2",children:[n.tags.slice(0,3).map((s,i)=>t.jsx("span",{className:"px-2 py-1 bg-primary-coral/10 text-primary-coral text-xs rounded-full",children:s},i)),n.tags.length>3&&t.jsxs("span",{className:"px-2 py-1 bg-light-muted/20 text-light-muted dark:text-dark-muted text-xs rounded-full",children:["+",n.tags.length-3]})]}),t.jsx("div",{className:"flex justify-end",children:t.jsxs("a",{href:n.url,target:"_blank",rel:"noopener noreferrer",className:"btn-outline text-sm px-4 py-2",children:["View on Medium",t.jsx(S,{className:"w-3 h-3 ml-1"})]})})]})]})},L=x.lazy(()=>M(()=>import("./MediumFilter-B9W_uWx_.js"),__vite__mapDeps([0,1,2,3,4,5,6]))),X=()=>{const{displayedArticles:n,activeFilter:e,showFilters:r,showAllArticles:s,availableFilters:i,hasMoreArticles:d,loading:h,error:o,handleFilterChange:g,handleToggleArticles:u,handleToggleFilters:m}=I(),{trackButtonClick:l}=F(),a={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.2}}},c={hidden:{y:20,opacity:0},visible:{y:0,opacity:1,transition:{duration:.5}}};return h?t.jsx("section",{id:"articles",className:"section bg-gradient",role:"region","aria-label":"Articles",children:t.jsx("div",{className:"container min-h-screen flex items-center justify-center",children:t.jsx("div",{className:"py-20",children:t.jsx("div",{"data-testid":"medium-loading-spinner",className:"animate-spin rounded-full h-8 w-8 border-b-2 border-light-primary dark:border-dark-primary"})})})}):o?t.jsx("section",{id:"articles",className:"section bg-gradient",role:"region","aria-label":"Articles",children:t.jsx("div",{className:"container min-h-screen flex items-center justify-center",children:t.jsx("div",{className:"text-center py-20",children:t.jsx("p",{className:"text-light-muted dark:text-dark-muted mb-4",children:"Unable to load articles at the moment."})})})}):t.jsx("section",{id:"articles",className:"section bg-gradient",role:"region","aria-label":"Articles",style:{contentVisibility:"auto",containIntrinsicSize:"1000px",minHeight:"100vh"},children:t.jsx("div",{className:"container",children:t.jsx(D,{features:E,children:t.jsxs(f.div,{variants:a,initial:"hidden",whileInView:"visible",viewport:{once:!0},className:"space-y-12",children:[t.jsxs(f.div,{variants:c,className:"text-center space-y-4",children:[t.jsx("h2",{className:"heading-2 text-3xl md:text-4xl font-bold text-light-text dark:text-dark-text mb-2",children:"Articles"}),t.jsx("p",{className:"body-text max-w-2xl mx-auto",children:"My latest thoughts and insights on software development, mobile engineering, and technology trends."}),t.jsxs("div",{className:"flex justify-center items-center space-x-4",children:[t.jsxs("button",{onClick:()=>{l("toggle_filters","medium_section"),m()},className:"flex items-center space-x-2 px-4 py-2 bg-light-surface dark:bg-dark-surface rounded-lg border border-light-muted/20 dark:border-dark-muted/20 hover:bg-light-surface/80 dark:hover:bg-dark-surface/80 transition-colors","aria-expanded":r,children:[t.jsx(_,{className:"w-4 h-4"}),t.jsx("span",{children:"Filter Articles"})]}),t.jsxs("a",{href:"https://medium.com/@fakhrymubarak",target:"_blank",rel:"noopener noreferrer",className:"btn btn-outline gap-2 px-5 py-2.5 rounded-lg",children:[t.jsx(S,{className:"w-4 h-4"}),t.jsx("span",{children:"View All on Medium"})]})]})]}),t.jsx(P,{children:r&&t.jsx(f.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.3},className:"overflow-hidden",children:t.jsx(x.Suspense,{fallback:t.jsx("div",{}),children:t.jsx(L,{filters:i,activeFilter:e,onFilterChange:g})})})}),t.jsx(f.div,{variants:c,className:"grid md:grid-cols-2 lg:grid-cols-3 gap-8",children:n.map((p,y)=>t.jsx(O,{article:p,index:y},p.id))}),d&&t.jsx(f.div,{variants:c,initial:"hidden",whileInView:"visible",viewport:{once:!0},className:"text-center",children:t.jsx("button",{onClick:u,className:"btn-outline px-8 py-3",children:s?"Show Less":"See More Articles"})})]})})})})};export{X as default};
